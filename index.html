<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Wedding of Salsa & Riyan</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Raleway:wght@300;400;500&family=Dancing+Script:wght@400;500;600&family=Montserrat:wght@300;400;500;600&family=EB+Garamond:wght@400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- CONFIG & VARIABLES --- */
        :root {
            --gold: #D4AF37;
            --dark-gold: #B8860B;
            --light-gold: #F4E8C1;
            --bg-dark: #0A0A0A;
            --bg-overlay: rgba(0, 0, 0, 0.85);
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background-color: var(--bg-dark);
            color: #f5f5f5;
            overflow-x: hidden;
            letter-spacing: 0.3px;
        }

        /* Canvas Style untuk Efek Bunga */
        #petals-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0.6;
        }

        /* --- ENVELOPE ANIMATION CSS --- */
        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            perspective: 1500px;
            width: 300px;
            height: 200px;
            margin: 0 auto;
            transition: transform 0.6s ease;
        }

        .envelope-wrapper:hover {
            transform: translateY(-5px);
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .envelope-back {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #0d0d0d);
            border: 1px solid #D4AF37;
            border-radius: 0 0 8px 8px;
            z-index: 1;
        }

        .envelope-left {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 100px 0 100px 150px;
            border-color: transparent transparent transparent #B8860B;
            z-index: 2;
            transform-origin: 100% 0;
        }

        .envelope-right {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 100px 150px 100px 0;
            border-color: transparent #B8860B transparent transparent;
            z-index: 2;
        }

        .envelope-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 150px 100px 150px;
            border-color: transparent transparent #B8860B transparent;
            z-index: 2;
        }

        .envelope-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 100px 150px 100px 150px;
            border-color: #D4AF37 transparent transparent transparent;
            z-index: 3;
            transform-origin: top;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), z-index 0.1s 0.4s;
            filter: drop-shadow(0 -2px 5px rgba(0,0,0,0.3));
        }

        .envelope-card {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) translateY(0);
            width: 90%;
            height: 90%;
            background: linear-gradient(to bottom, #0A0A0A, #111);
            border: 1px solid #D4AF37;
            z-index: 1;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.4s, z-index 0s 0.8s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            padding: 10px;
        }

        .envelope-seal {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: radial-gradient(circle at 30% 30%, #F4E8C1, #D4AF37);
            border-radius: 50%;
            z-index: 4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #fff;
        }
        .envelope-seal i { color: #000; font-size: 1.2rem; }

        /* STATE SAAT DIBUKA (OPEN) */
        .envelope-wrapper.open .envelope-top {
            transform: rotateX(180deg);
            z-index: 0;
        }

        .envelope-wrapper.open .envelope-card {
            transform: translateX(-50%) translateY(-80px);
            z-index: 5;
        }

        .tap-hint {
            margin-top: 20px;
            font-size: 0.8rem;
            color: #D4AF37;
            animation: pulse 1.5s infinite;
            letter-spacing: 2px;
        }

        /* --- TYPOGRAPHY --- */
        .font-wedding { font-family: 'Great Vibes', cursive; font-weight: 400; }
        .font-title { font-family: 'Cinzel', serif; font-weight: 600; letter-spacing: 1px; }
        .font-serif { font-family: 'Playfair Display', serif; font-style: italic; }
        .font-luxury { font-family: 'Great Vibes', cursive; }
        .font-body { font-family: 'Raleway', sans-serif; font-weight: 300; }
        .font-heading { font-family: 'EB Garamond', serif; font-weight: 500; }

        /* --- PARALLAX BACKGROUNDS --- */
        .parallax-bg {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
        }
        
        .parallax-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(10,10,10,0.95));
            position: absolute;
            inset: 0;
        }

        /* --- ANIMATIONS & EFFECTS --- */
        .spin-slow { animation: spin 15s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .glow-effect {
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.25), 
                        0 0 80px rgba(212, 175, 55, 0.15);
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--gold), var(--light-gold), var(--dark-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gradient-border {
            border: 1px solid transparent;
            background: linear-gradient(var(--bg-dark), var(--bg-dark)) padding-box,
                        linear-gradient(135deg, var(--gold), var(--dark-gold)) border-box;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111111; }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(var(--gold), var(--dark-gold));
            border-radius: 4px;
        }

        /* Glassmorphism Premium */
        .glass-dark {
            background: rgba(20, 20, 30, 0.65);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(212, 175, 55, 0.15);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        /* Floating Animation */
        .float-animation {
            animation: float 10s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(1deg); }
            66% { transform: translateY(10px) rotate(-1deg); }
        }

        /* Shimmer Effect */
        .shimmer {
            position: relative;
            overflow: hidden;
        }

        .shimmer::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to right,
                transparent 0%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 100%
            );
            transform: rotate(30deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }

        /* Elegant Underline */
        .elegant-underline {
            position: relative;
            display: inline-block;
        }

        .elegant-underline::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        /* Gold Pattern */
        .gold-pattern-bg {
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(212, 175, 55, 0.03) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.02) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(212, 175, 55, 0.01) 0%, transparent 30%);
        }

        /* Button Hover Effect */
        .btn-gold {
            background: linear-gradient(135deg, var(--dark-gold), var(--gold));
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(212, 175, 55, 0.3);
        }

        .btn-gold::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn-gold:hover::before {
            left: 100%;
        }

        /* Card Hover Effect */
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
        }

        /* Timeline Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, transparent, var(--gold), transparent);
            transform: translateX(-50%);
        }

        /* Loading Animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        /* Image Frame */
        .image-frame {
            position: relative;
            padding: 12px;
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            border-radius: 50%;
        }

        .image-frame::before {
            content: '';
            position: absolute;
            inset: 4px;
            background: var(--bg-dark);
            border-radius: 50%;
            z-index: 1;
        }

        .image-frame img {
            position: relative;
            z-index: 2;
            border-radius: 50%;
        }

        /* Section Spacing */
        section {
            padding: 80px 0;
        }

        /* Responsive Typography */
        @media (max-width: 768px) {
            h1 { font-size: 3rem !important; line-height: 1.2; }
            h2 { font-size: 2rem !important; }
            h3 { font-size: 1.5rem !important; }
            .text-xl { font-size: 1rem !important; }
            section { padding: 60px 0; }
            
            #cover {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                min-height: 100vh; 
                height: auto;
                overflow-y: auto;
                z-index: 100;
                padding-bottom: 40px;
            }
            
            #cover-content {
                min-height: 100vh;
                padding-top: 40px;
                padding-bottom: 60px;
                justify-content: center;
            }
        }
        
        /* Iframe Container Style */
        .video-wrapper {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Elegant Corner Decorations */
        .corner-decor {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(212, 175, 55, 0.5);
            pointer-events: none;
            z-index: 10;
        }
        .top-left { top: 10px; left: 10px; border-right: none; border-bottom: none; }
        .top-right { top: 10px; right: 10px; border-left: none; border-bottom: none; }
        .bottom-left { bottom: 10px; left: 10px; border-right: none; border-top: none; }
        .bottom-right { bottom: 10px; right: 10px; border-left: none; border-top: none; }

    </style>
</head>
<body id="main-body" class="bg-[#0A0A0A] gold-pattern-bg">

    <!-- Canvas untuk Efek Bunga Jatuh -->
    <canvas id="petals-canvas"></canvas>

    <!-- Music Control -->
    <div id="music-control" class="fixed bottom-6 right-6 z-50 hidden cursor-pointer" onclick="toggleMusic()">
        <div class="relative w-14 h-14 bg-black/80 rounded-full border border-[#D4AF37]/50 flex items-center justify-center overflow-hidden group hover:border-[#D4AF37] transition-all duration-300">
            <div id="disc-icon" class="absolute w-full h-full opacity-30 spin-slow" style="background: url('https://www.transparenttextures.com/patterns/vinyl.png'); background-size: contain;"></div>
            <i class="fas fa-music text-[#D4AF37] relative z-10 text-lg group-hover:scale-110 transition-transform"></i>
        </div>
    </div>
    
    <audio id="bg-music" loop>
        <source src="lagu.mp3" type="audio/mp3">
    </audio>

    <!-- Cover Section dengan Konsep Amplop -->
    <section id="cover" class="fixed inset-0 z-[100] flex items-center justify-center bg-[url('bg1.jpeg')] bg-cover bg-center">
        <!-- Overlay gelap -->
        <div class="absolute inset-0 bg-black/80 z-0"></div>
        
        <div class="relative z-10 w-full px-4 flex flex-col items-center justify-center h-screen">
            
            <!-- Header Undangan -->
            <h3 class="text-[#F4E8C1] tracking-[0.6em] uppercase text-xs md:text-sm mb-6 font-light font-body opacity-80" data-aos="fade-down">
                The Wedding
            </h3>
            
            <h1 class="font-title text-4xl md:text-6xl text-white mb-8 leading-tight text-center" data-aos="zoom-in">
                <span class="gradient-text">Salsa</span>
                <span class="text-[#D4AF37] mx-2 text-2xl md:text-4xl font-thin">&</span>
                <span class="gradient-text">Riyan</span>
            </h1>

            <p class="font-serif text-gray-300 text-sm mb-10 max-w-md text-center leading-relaxed px-4" data-aos="fade-up">
                "Kami mengundang Bapak/Ibu/Saudara/i untuk membuka amplop undangan ini."
            </p>

            <!-- KOMPONEN AMPLOP -->
            <div class="envelope-wrapper" id="envelope-trigger" onclick="openEnvelope()">
                <div class="envelope">
                    <!-- Tutup Atas (Flap) -->
                    <div class="envelope-top"></div>
                    
                    <!-- Segel Emas -->
                    <div class="envelope-seal">
                        <i class="fas fa-ring"></i>
                    </div>

                    <!-- Kartu Di Dalam -->
                    <div class="envelope-card">
                        <div class="text-center p-2">
                            <p class="font-luxury text-3xl text-[#D4AF37] mb-1">Undangan</p>
                            <p class="text-xs text-gray-400 font-body">Klik untuk membuka</p>
                        </div>
                    </div>

                    <!-- Bagian Belakang Amplop -->
                    <div class="envelope-back"></div>
                    <!-- Lipatan-lipatan -->
                    <div class="envelope-left"></div>
                    <div class="envelope-right"></div>
                    <div class="envelope-bottom"></div>
                </div>
            </div>

            <p class="tap-hint font-body mt-8" id="tap-text">KETUK AMPLOP</p>

        </div>
    </section>

    <!-- Main Content -->
    <main id="invitation" class="hidden opacity-0 transition-opacity duration-1000 relative bg-[#0A0A0A]">
        
        <!-- Hero Section -->
        <section class="min-h-screen relative flex flex-col justify-center items-center text-center px-6 parallax-bg" 
                 style="background-image: url('bg1.jpeg');">
            <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-[#0A0A0A]"></div>
            
            <div class="relative z-10 mt-20" data-aos="fade-up" data-aos-duration="1200">
                <p class="font-body text-[#D4AF37] text-sm tracking-[0.4em] uppercase mb-6">Save The Date</p>
                <h2 class="font-luxury text-7xl md:text-9xl text-white mb-6 leading-none">S & R</h2>
                <p class="font-heading text-2xl italic text-gray-200 mb-2">Kamis, 8 Januari 2026</p>
                <p class="font-body text-gray-400 text-sm mb-12">Pukul 08.00 WIB</p>
                
                <div class="flex justify-center gap-6 mt-12">
                    <div class="glass-dark p-5 rounded-xl w-24 shimmer">
                        <span id="days" class="text-3xl font-bold block text-white font-title">00</span>
                        <span class="text-[10px] uppercase tracking-wider text-[#D4AF37] mt-1 block">Hari</span>
                    </div>
                    <div class="glass-dark p-5 rounded-xl w-24 shimmer">
                        <span id="hours" class="text-3xl font-bold block text-white font-title">00</span>
                        <span class="text-[10px] uppercase tracking-wider text-[#D4AF37] mt-1 block">Jam</span>
                    </div>
                    <div class="glass-dark p-5 rounded-xl w-24 shimmer">
                        <span id="minutes" class="text-3xl font-bold block text-white font-title">00</span>
                        <span class="text-[10px] uppercase tracking-wider text-[#D4AF37] mt-1 block">Menit</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Couple Section -->
        <section class="py-20 px-6 bg-[#0A0A0A] relative overflow-hidden">
            <div class="absolute inset-0 opacity-5" style="background-image: url('bg1.jpeg'); background-size: cover;"></div>

            <div class="container mx-auto max-w-6xl relative z-10">
                <div class="text-center mb-16" data-aos="fade-up">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/2/27/Basmala.svg" class="h-16 mx-auto mb-8 opacity-90 invert" alt="Bismillah" style="filter: invert(1) sepia(1) saturate(2) hue-rotate(310deg);">
                    
                    <p class="font-serif italic text-gray-300 max-w-2xl mx-auto leading-relaxed text-lg">
                        "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya."
                    </p>
                    <p class="mt-4 text-[#D4AF37] font-medium tracking-wider text-sm font-body">â€” QS. Ar-Rum: 21</p>
                </div>

                <div class="grid md:grid-cols-2 gap-12 items-center">
                    
                    <!-- Bride -->
                    <div class="glass-dark p-8 rounded-2xl text-center relative group card-hover" data-aos="fade-right">
                        <div class="image-frame w-56 h-56 mx-auto mb-8">
                            <img src="sl.jpeg" class="w-full h-full object-cover" alt="Bride" onerror="this.src='https://picsum.photos/seed/bride/300/300'">
                        </div>
                        <h2 class="font-title text-4xl text-white mb-3">Salsabila Indah Suciawati</h2>
                        <p class="text-[#D4AF37] text-sm mb-4 font-body">Putri pertama dari</p>
                        <p class="text-gray-400 text-sm mb-6 font-body">Bapak Irwansyah ST. (Alm) & Ibu Hermawati SP.,Spd.</p>
                        <div class="inline-flex items-center gap-2 text-gray-300 text-sm hover:text-[#D4AF37] transition font-body">
                            <i class="fab fa-instagram text-xs"></i>
                            <span>@sabiyacikacua</span>
                        </div>
                    </div>

                    <!-- Groom -->
                    <div class="glass-dark p-8 rounded-2xl text-center relative group card-hover" data-aos="fade-left">
                        <div class="image-frame w-56 h-56 mx-auto mb-8">
                            <img src="ry.jpeg" class="w-full h-full object-cover" alt="Groom" onerror="this.src='https://picsum.photos/seed/groom/300/300'">
                        </div>
                        <h2 class="font-title text-4xl text-white mb-3">Riyan Dwi Putra</h2>
                        <p class="text-[#D4AF37] text-sm mb-4 font-body">Putra kedua dari</p>
                        <p class="text-gray-400 text-sm mb-6 font-body">Bapak Bustamam & Ibu Heni Kurniasih</p>
                        <div class="inline-flex items-center gap-2 text-gray-300 text-sm hover:text-[#D4AF37] transition font-body">
                            <i class="fab fa-instagram text-xs"></i>
                            <span>@riyancikacua</span>
                        </div>
                    </div>

                </div>

                <div class="text-center mt-16 pt-8 border-t border-gray-800">
                    <p class="font-serif text-gray-300 italic text-lg">
                        " Merupakan suatu kehormatan & kebahagiaan apabila Bapak/Ibu/Saudara/i <br>berkenan hadir serta memberi Do'a restu kepada Putra - Putri kami."
                    </p>
                </div>
            </div>
        </section>

        <!-- Love Story -->
        <section class="py-20 bg-[#111111] relative">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="font-title text-5xl text-center text-white mb-16 elegant-underline" data-aos="fade-up">Kisah Cinta Kami</h2>
                
                <div class="relative timeline-line space-y-16">
                    <!-- 1. Pertama Bertemu (KIRI) -->
                    <div class="relative flex items-center justify-between md:flex-row flex-col-reverse group">
                        <div class="w-full md:w-[45%] glass-dark p-8 rounded-xl text-right md:text-right" data-aos="fade-right">
                            <h3 class="text-2xl font-bold text-white mb-3">Pertama Bertemu</h3>
                            <span class="text-[#D4AF37] text-base block mb-3">Oktober 2021</span>
                            <p class="text-gray-300 text-sm leading-relaxed font-body">
                                Tidak ada yang kebetulan di dunia ini, semua sudah tersusun dengan sangat rapi oleh sang maha kuasa, kita tidak bisa memilih kepada siapa kita akan jatuh cinta. Kami bertemu pertama kalinya pada Oktober 2021 pertemuan singkat yang hanya berkenalan satu sama lain.
                            </p>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-10 h-10 bg-[#D4AF37] rounded-full border-4 border-[#111111] z-10 flex items-center justify-center">
                            <i class="fas fa-heart text-xs text-black"></i>
                        </div>
                        <div class="w-full md:w-[45%]"></div>
                    </div>

                    <!-- 2. Menjalani Hubungan (KANAN) -->
                    <div class="relative flex items-center justify-between md:flex-row flex-col group">
                        <div class="w-full md:w-[45%]"></div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-10 h-10 bg-[#D4AF37] rounded-full border-4 border-[#111111] z-10 flex items-center justify-center">
                            <i class="fas fa-heart text-xs text-black"></i>
                        </div>
                        <div class="w-full md:w-[45%] glass-dark p-8 rounded-xl" data-aos="fade-left">
                            <h3 class="text-2xl font-bold text-white mb-3">Menjalani Hubungan</h3>
                            <span class="text-[#D4AF37] text-base block mb-3">2022 - 2025</span>
                            <p class="text-gray-300 text-sm leading-relaxed font-body">
                                Katanya cinta dapat tumbuh dengan kebersamaan, seiring berjalannya waktu, kami semakin dekat dengan sederhana dan kehangatan waktu demi waktu sejak Januari 2022 kami belajar tentang arti cinta, tentang menerima, memahami, dan tumbuh bersama. Kami dipertemukan karena semesta merestui doa-doa yang kami panjatkan dalam diam. Sejak itu kami saling menyadari bahwa satu sama lain adalah bagian takdir yang telah lama dicari.
                            </p>
                        </div>
                    </div>

                    <!-- 3. Lamaran (KIRI) -->
                    <div class="relative flex items-center justify-between md:flex-row flex-col-reverse group">
                        <div class="w-full md:w-[45%] glass-dark p-8 rounded-xl text-right md:text-right" data-aos="fade-right">
                            <h3 class="text-2xl font-bold text-white mb-3">Lamaran</h3>
                            <span class="text-[#D4AF37] text-base block mb-3">Desember 2025</span>
                            <p class="text-gray-300 text-sm leading-relaxed font-body">
                               Kehendaknya menuntun kami untuk memilih melangkah bersama, menyatukan dua hati dalam satu tujuan dan satu doa. Hingga akhirnya membawa kami kepada sebuah ikatan suci yang di Ridhoi-Nya. Kami melangsungkan Acara Lamaran pada Desember 2025 lalu. Inilah sepenggal kisah cinta kami, yang dibagikan dengan penuh Syukur dan Sukacita.
                            </p>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-10 h-10 bg-[#D4AF37] rounded-full border-4 border-[#111111] z-10 flex items-center justify-center">
                            <i class="fas fa-gem text-xs text-black"></i>
                        </div>
                        <div class="w-full md:w-[45%]"></div>
                    </div>

                    <!-- 4. Pernikahan (KANAN) -->
                    <div class="relative flex items-center justify-between md:flex-row flex-col group">
                        <div class="w-full md:w-[45%]"></div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-10 h-10 bg-[#D4AF37] rounded-full border-4 border-[#111111] z-10 flex items-center justify-center">
                            <i class="fas fa-ring text-xs text-black"></i>
                        </div>
                        <div class="w-full md:w-[45%] glass-dark p-8 rounded-xl" data-aos="fade-left">
                            <h3 class="text-2xl font-bold text-white mb-3">Pernikahan</h3>
                            <span class="text-[#D4AF37] text-base block mb-3">8 Januari 2026</span>
                            <p class="text-gray-300 text-sm leading-relaxed font-body">
                                Satu hal yang kami sadari.  Bukan karena bertemu lalu berjodoh, tapi karna berjodohlah kami bertemu. Kami memutuskan untuk mengikrarkan janji suci pernikahan Insya Allah pada 08 Januari 2026. Sebagaimana yang pernah dikatakan oleh Ali bin Abi Thalib : " Apa yang menjadi takdirmu akan menemukan jalannya untuk menemukanmu "
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Event Schedule -->
        <section class="min-h-screen py-20 relative parallax-bg flex items-center" 
                 style="background-image: url('bg1.jpeg');">
            <div class="absolute inset-0 bg-black/80"></div>
            
            <div class="container mx-auto px-6 relative z-10 max-w-5xl">
                <div class="text-center mb-16">
                    <h2 class="font-title text-5xl text-center text-white mb-6 elegant-underline">Rangkaian Acara</h2>
                    <p class="text-gray-300 text-lg font-body max-w-2xl mx-auto">
                        Dengan memohon rahmat dan ridho Allah SWT, kami mengundang Bapak/Ibu/Saudara/i untuk menghadiri acara pernikahan kami:
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Akad Nikah -->
                    <div class="glass-dark p-8 rounded-2xl text-center card-hover" data-aos="zoom-in-right">
                        <div class="w-20 h-20 bg-gradient-to-br from-[#D4AF37]/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-6 text-[#D4AF37]">
                            <i class="fas fa-mosque text-3xl"></i>
                        </div>
                        <h3 class="font-title text-3xl text-white mb-4">Akad </h3>
                        <p class="text-[#D4AF37] font-bold text-xl mb-4">Kamis, 8 Januari 2026</p>
                        <p class="text-gray-300 mb-4 font-body">
                            <i class="far fa-clock mr-2 text-[#D4AF37]"></i> 09.00 - 11.00 WIB
                        </p>
                        <p class="text-sm text-gray-400 mb-6 font-body">R&G VILLAGE Jl. Citeko Panjang, Citeko, Kec. Cisarua, Kab. Bogor</p>
                        
                        <div class="space-y-3">
                            <a href="#" class="inline-flex items-center justify-center gap-3 bg-red-600/20 hover:bg-red-600/30 text-white px-6 py-3 rounded-full text-sm transition border border-red-600/30 w-full font-body">
                                <i class="fab fa-youtube"></i> Live Streaming
                            </a>
                        </div>
                    </div>

                    <!-- Resepsi -->
                    <div class="glass-dark p-8 rounded-2xl text-center card-hover" data-aos="zoom-in-left">
                        <div class="w-20 h-20 bg-gradient-to-br from-[#D4AF37]/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-6 text-[#D4AF37]">
                            <i class="fas fa-glass-cheers text-3xl"></i>
                        </div>
                        <h3 class="font-title text-3xl text-white mb-4">Syukuran</h3>
                        <p class="text-[#D4AF37] font-bold text-xl mb-4">Kamis, 8 Januari 2026</p>
                        <p class="text-gray-300 mb-4 font-body">
                            <i class="far fa-clock mr-2 text-[#D4AF37]"></i> 12.00 - Selesai
                        </p>
                        <p class="text-sm text-gray-400 mb-6 font-body">R&G VILLAGE Jl. Citeko Panjang, Citeko, Kec. Cisarua, Kab. Bogor</p>
                        
                        <div class="space-y-3">
                            <a href="https://maps.app.goo.gl/HXx741SH9xJ9Bged9" target="_blank" class="inline-flex items-center justify-center gap-3 btn-gold text-black px-6 py-3 rounded-full text-sm font-medium transition w-full font-body">
                                <i class="fas fa-location-dot"></i> Lihat Lokasi
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Map -->
                <div class="mt-12 glass-dark p-4 rounded-2xl" data-aos="fade-up">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d826.8209866777212!2d106.9345974!3d-6.7026089!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69b70025214969%3A0x42ba20dfacf7f22a!2sRG%20Village!5e1!3m2!1sid!2sid!4v1766603478293!5m2!1sid!2sid" width="100%" height="300" style="border:0; border-radius: 12px; filter: sepia(100%) hue-rotate(330deg) saturate(50%);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> 
                            
                </div>
            </div>
        </section>

        <!-- Gallery -->
        <section class="py-20 bg-[#0A0A0A]">
            <div class="container mx-auto px-6 max-w-6xl">
                <h2 class="font-title text-5xl text-center text-white mb-12 elegant-underline" data-aos="fade-up">Galeri Kenangan</h2>
                
                <div class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">
                    <!-- Gallery Items -->
                    <div class="break-inside-avoid relative group rounded-xl overflow-hidden cursor-pointer card-hover" onclick="showModal(this.querySelector('img').src)">
                        <img src="g4.jpeg" class="w-full transform transition duration-500 group-hover:scale-105" alt="Gallery" onerror="this.src='https://picsum.photos/seed/g1/400/600'">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center pb-4">
                            <i class="fas fa-search-plus text-white text-2xl"></i>
                        </div>
                    </div>
                    
                    <div class="break-inside-avoid relative group rounded-xl overflow-hidden cursor-pointer card-hover" onclick="showModal(this.querySelector('img').src)">
                        <img src="bgt.jpeg" class="w-full transform transition duration-500 group-hover:scale-105" alt="Gallery" onerror="this.src='https://picsum.photos/seed/g2/400/500'">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center pb-4">
                            <i class="fas fa-search-plus text-white text-2xl"></i>
                        </div>
                    </div>
                    
                    <div class="break-inside-avoid relative group rounded-xl overflow-hidden cursor-pointer card-hover" onclick="showModal(this.querySelector('img').src)">
                        <img src="g3.jpeg" class="w-full transform transition duration-500 group-hover:scale-105" alt="Gallery" onerror="this.src='https://picsum.photos/seed/g3/400/550'">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center pb-4">
                            <i class="fas fa-search-plus text-white text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION VIDEO KENANGAN (FIXED EMBED + LOGIC) -->
        <section class="py-20 bg-[#111111] relative overflow-hidden">
            <!-- Background Decoration -->
            <div class="absolute top-0 right-0 w-64 h-64 bg-[#D4AF37]/5 rounded-full blur-[100px]"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 bg-[#D4AF37]/5 rounded-full blur-[100px]"></div>

            <div class="container mx-auto px-6 max-w-4xl relative z-10">
                <div class="text-center mb-12" data-aos="fade-up">
                    <h2 class="font-luxury text-5xl text-[#D4AF37] mb-4">Video Kenangan</h2>
                    <p class="text-gray-400 font-body text-lg">Sepenggal momen indah dalam perjalanan cinta kami</p>
                </div>

                <!-- Video Container with Elegant Frame -->
                <div class="glass-dark p-3 md:p-4 rounded-2xl border border-[#D4AF37]/20" data-aos="zoom-in-up">
                    <div class="video-wrapper">
                        <!-- EMBED VIDEO SCREENPAL -->
                        <!-- Menambahkan ID 'video-iframe' untuk manipulasi JS -->
                        <iframe 
                            id="video-iframe"
                            src="https://go.screenpal.com/player/cTltotnYSao?ff=1&title=0" 
                            title="Wedding Video" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen>
                        </iframe>
                        
                        <!-- Elegant Corner Decorations -->
                        <div class="corner-decor top-left"></div>
                        <div class="corner-decor top-right"></div>
                        <div class="corner-decor bottom-left"></div>
                        <div class="corner-decor bottom-right"></div>
                    </div>
                </div>
                
                <p class="text-center text-gray-500 text-sm mt-4 font-serif italic" data-aos="fade-up">
                    *Putar video untuk melihat momen kami
                </p>
            </div>
        </section>
        <!-- END SECTION VIDEO -->

        <!-- Gift & RSVP -->
        <section class="py-20 px-6 bg-[#111111] relative">
            <div class="container mx-auto max-w-4xl relative z-10">
                
                <!-- Wedding Gift -->
                <div class="text-center mb-16" data-aos="fade-up">
                    <h2 class="font-luxury text-6xl text-[#D4AF37] mb-8">Wedding Gift</h2>
                    <p class="text-gray-300 mb-10 text-lg font-body max-w-xl mx-auto">
                        Tanpa mengurangi rasa hormat, bagi yang ingin memberikan tanda kasih dapat melalui:
                    </p>
                    
                    <div class="space-y-6">
                        <!-- Rekening 1: BCA -->
                        <div class="glass-dark p-6 rounded-2xl border border-[#D4AF37]/20 max-w-md mx-auto card-hover text-left">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center gap-3">
                                    <div class="bg-blue-600/50 p-2 rounded-lg">
                                        <i class="fas fa-university text-blue-300"></i>
                                    </div>
                                    <span class="text-white text-sm font-bold font-body">BANK BCA</span>
                                </div>
                            </div>
                            
                            <div class="text-center mb-4">
                                <p class="text-2xl font-mono text-white mb-1 tracking-wider">174 0744 808</p>
                                <p class="text-sm text-gray-400 font-body">a.n Salsabila Indah Suciawati</p>
                            </div>
                            
                            <button onclick="copyText('174 0744 808')" class="w-full py-2.5 btn-gold text-black font-medium rounded-lg text-sm transition font-body">
                                <i class="far fa-copy mr-2"></i> Salin Nomor Rekening
                            </button>
                        </div>

                        <!-- Rekening 2: BRI -->
                        <div class="glass-dark p-6 rounded-2xl border border-[#D4AF37]/20 max-w-md mx-auto card-hover text-left">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center gap-3">
                                    <div class="bg-blue-900/50 p-2 rounded-lg">
                                        <i class="fas fa-university text-blue-400"></i>
                                    </div>
                                    <span class="text-white text-sm font-bold font-body">BANK BRI</span>
                                </div>
                            </div>
                            
                            <div class="text-center mb-4">
                                <p class="text-2xl font-mono text-white mb-1 tracking-wider">122 401 020 1755 01</p>
                                <p class="text-sm text-gray-400 font-body">a.n Riyan Dwi Putra</p>
                            </div>
                            
                            <button onclick="copyText('122 401 020 1755 01')" class="w-full py-2.5 btn-gold text-black font-medium rounded-lg text-sm transition font-body">
                                <i class="far fa-copy mr-2"></i> Salin Nomor Rekening
                            </button>
                        </div>

                        <!-- Rekening 3: DANA -->
                        <div class="glass-dark p-6 rounded-2xl border border-[#D4AF37]/20 max-w-md mx-auto card-hover text-left">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center gap-3">
                                    <div class="bg-blue-600/50 p-2 rounded-lg">
                                        <i class="fas fa-wallet text-blue-300"></i>
                                    </div>
                                    <span class="text-white text-sm font-bold font-body">DANA</span>
                                </div>
                            </div>
                            
                            <div class="text-center mb-4">
                                <p class="text-2xl font-mono text-white mb-1 tracking-wider">0877 3942 4689</p>
                                <p class="text-sm text-gray-400 font-body">a.n Salsabila Indah Suciawati</p>
                            </div>
                            
                            <button onclick="copyText('0877 3942 4689')" class="w-full py-2.5 btn-gold text-black font-medium rounded-lg text-sm transition font-body">
                                <i class="far fa-copy mr-2"></i> Salin Nomor
                            </button>
                        </div>
                    </div>
                </div>

                <!-- RSVP Form -->
                <div class="glass-dark p-8 md:p-10 rounded-2xl gradient-border" data-aos="fade-up">
                    <h2 class="font-title text-4xl text-center text-white mb-8">Konfirmasi Kehadiran</h2>
                    
                    <form id="rsvp-form" class="space-y-6">
                        <input type="text" id="guest-name" placeholder="Nama Lengkap" class="w-full bg-[#1A1A1A] border border-gray-700 text-white px-5 py-4 rounded-xl focus:border-[#D4AF37] outline-none transition font-body placeholder-gray-500">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <select id="guest-count" class="w-full bg-[#1A1A1A] border border-gray-700 text-white px-5 py-4 rounded-xl focus:border-[#D4AF37] outline-none transition font-body">
                                <option value="" disabled selected>Jumlah Tamu</option>
                                <option value="1">1 Orang</option>
                                <option value="2">2 Orang</option>
                                <option value="3">3 Orang</option>
                                <option value="4">4 Orang</option>
                            </select>
                            <select id="guest-status" class="w-full bg-[#1A1A1A] border border-gray-700 text-white px-5 py-4 rounded-xl focus:border-[#D4AF37] outline-none transition font-body">
                                <option value="" disabled selected>Konfirmasi</option>
                                <option value="Hadir">Hadir</option>
                                <option value="Tidak Hadir">Berhalangan</option>
                            </select>
                        </div>
                        
                        <textarea id="guest-msg" rows="4" placeholder="Ucapan & Doa (Opsional)" class="w-full bg-[#1A1A1A] border border-gray-700 text-white px-5 py-4 rounded-xl focus:border-[#D4AF37] outline-none transition font-body placeholder-gray-500 resize-none"></textarea>
                        
                        <button type="submit" class="w-full btn-gold text-black font-medium py-4 rounded-xl transition shadow-lg font-body">
                            Kirim Konfirmasi
                        </button>
                    </form>

                    <!-- Wishes Box -->
                    <div id="wishes-box" class="mt-10 max-h-64 overflow-y-auto space-y-4 pr-3">
                        <!-- Wishes will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-black py-12 text-center">
            <div class="container mx-auto px-6">
                <h2 class="font-luxury text-5xl text-[#D4AF37] mb-6">Salsa & Riyan</h2>
                <p class="text-gray-300 mb-8 text-lg font-body max-w-xl mx-auto">
                    Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu.
                </p>
                
                <div class="flex justify-center gap-6 mb-8">
                    <a href="https://www.instagram.com/paus_goreng8?igsh=aHRmbmZmN21uNTFs" class="text-gray-400 hover:text-[#D4AF37] transition">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-[#D4AF37] transition">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </a>
                    <a href="gunturfadilah140@gmail.com" class="text-gray-400 hover:text-[#D4AF37] transition">
                        <i class="fas fa-envelope text-xl"></i>
                    </a>
                </div>
                
                <p class="text-gray-500 text-sm font-body pt-6 border-t border-gray-800">
                    Created by 
                    <a href="https://www.gunturpadilah.web.id" class="text-[#D4AF37] hover:underline">Guntur Padilah</a>
                </p>
            </div> 
        </footer>

    </main>

    <!-- Image Modal -->
    <div id="img-modal" class="fixed inset-0 z-[200] bg-black/95 hidden items-center justify-center p-4" onclick="closeModal()">
        <div class="relative max-w-4xl w-full" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="absolute -top-12 right-0 text-white text-2xl hover:text-[#D4AF37] transition">
                <i class="fas fa-times"></i>
            </button>
            <img id="modal-img" src="" class="w-full h-auto rounded-lg shadow-2xl">
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.7/dayjs.min.js"></script>

    <!-- PENTING: Menambahkan type="module" agar Import Firebase berhasil -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyDF_0g55ME0-GEDoDBKsQUe7LV5q0k7fhE",
            authDomain: "litera-50b33.firebaseapp.com",
            databaseURL: "https://litera-50b33-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "litera-50b33",
            storageBucket: "litera-50b33.firebasestorage.app",
            messagingSenderId: "965279035193",
            appId: "1:965279035193:web:a4c59829d50cb6eb0182e8",
            measurementId: "G-SEY0WJXSSF"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- VIDEO & MUSIC INTERACTION LOGIC ---
        
        const bgMusic = document.getElementById('bg-music');
        const videoIframe = document.getElementById('video-iframe');
        const musicIcon = document.getElementById('disc-icon');
        
        // Fungsi Matikan Musik
        function pauseMusic() {
            bgMusic.pause();
            if(musicIcon) musicIcon.classList.remove('spin-slow');
        }
        
        // Fungsi Nyala Musik
        function playMusic() {
            bgMusic.play().catch(e => console.log("Autoplay prevented"));
            if(musicIcon) musicIcon.classList.add('spin-slow');
        }

        // Event Listener pada Iframe
        // Kita pakai 'blur' dan 'focus' sebagai pendekatan terbaik untuk Iframe eksternal
        // Saat user masuk ke Iframe (Focus) -> Musik mati biar nggak ganggu video.
        // Saat user keluar dari Iframe (Blur) -> Musik nyala lagi.
        
        videoIframe.addEventListener('focus', () => {
            console.log("Video area focused - Pausing music");
            pauseMusic();
        });
        
        videoIframe.addEventListener('blur', () => {
            console.log("Video area blurred - Resuming music");
            // Cek dulu apakah user sedang scroll jauh dari video, biar musiknya nggak nyala pas masih di area video
            const rect = videoIframe.getBoundingClientRect();
            const isVisible = (rect.top < window.innerHeight && rect.bottom >= 0);
            
            if (isVisible) {
                // Jika masih terlihat, kita biarkan musik mati sebentar
                // Tapi jika user scroll ke bawah (blur karena scroll), musik nyala
            } else {
                // Jika video sudah tidak terlihat di layar, pastikan musik nyala
                playMusic();
            }
        });

        // --- PETAL ANIMATION SCRIPT ---
        
        let petals = [];
        const canvas = document.getElementById('petals-canvas');
        const ctx = canvas.getContext('2d');
        let animationId;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        class Petal {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.size = Math.random() * 10 + 5;
                this.speedY = Math.random() * 1 + 0.5;
                this.speedX = Math.random() * 1 - 0.5;
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 2 - 1;
                const colors = [
                    'rgba(212, 175, 55, 0.3)',
                    'rgba(244, 232, 193, 0.3)',
                    'rgba(184, 134, 11, 0.2)'
                ];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.flip = Math.random() * Math.PI;
                this.flipSpeed = Math.random() * 0.03 + 0.01;
            }

            update() {
                this.y += this.speedY;
                this.x += Math.sin(this.flip) * 0.5 + this.speedX;
                this.rotation += this.rotationSpeed;
                this.flip += this.flipSpeed;

                if (this.y > canvas.height) {
                    this.reset();
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                
                ctx.beginPath();
                ctx.fillStyle = this.color;
                ctx.ellipse(0, 0, this.size, this.size / 2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.restore();
            }
        }

        function initPetalAnimation() {
            resizeCanvas();
            const numberOfPetals = 40; 
            for (let i = 0; i < numberOfPetals; i++) {
                petals.push(new Petal());
            }
            animatePetal();
        }

        function animatePetal() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            petals.forEach(petal => {
                petal.update();
                petal.draw();
            });
            animationId = requestAnimationFrame(animatePetal);
        }

        window.addEventListener('resize', resizeCanvas);

        // --- LOGIC ---
        
        // Init AOS
        AOS.init({ 
            once: true, 
            duration: 1000,
            offset: 50,
            disable: 'mobile' 
        });

        // Fungsi Buka Amplop (Trigger)
        window.openEnvelope = () => {
            const envelope = document.getElementById('envelope-trigger');
            const tapText = document.getElementById('tap-text');
            
            envelope.classList.add('open');
            tapText.style.opacity = '0';
            
            setTimeout(() => {
                openInvitation();
            }, 800);
        };

        // Fungsi Transisi ke Main Content
        window.openInvitation = () => {
            const cover = document.getElementById('cover');
            const main = document.getElementById('invitation');
            const musicBtn = document.getElementById('music-control');
            
            window.scrollTo(0,0);
            
            cover.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            cover.style.opacity = '0';
            cover.style.transform = 'scale(1.05)';
            
            setTimeout(() => {
                cover.style.display = 'none';
                main.classList.remove('hidden');
                document.body.style.overflowY = 'auto';
                
                setTimeout(() => {
                    main.classList.remove('opacity-0');
                    setTimeout(() => {
                        AOS.refresh();
                    }, 100);
                    
                    // Play musik saat buka amplop
                    playMusic();
                    
                    musicBtn.classList.remove('hidden');
                    
                    initPetalAnimation();
                }, 100);
            }, 800);
        };

        // Music Toggle Manual (Tombol Musik Pojok Kanan Bawah)
        window.toggleMusic = () => {
            if(bgMusic.paused) {
                playMusic();
            } else {
                pauseMusic();
            }
        };

        // Copy Function
        window.copyText = (text) => {
            navigator.clipboard.writeText(text);
            Swal.fire({
                icon: 'success',
                title: 'Berhasil!',
                text: 'Nomor telah disalin',
                showConfirmButton: false,
                timer: 1500,
                background: '#0A0A0A',
                color: '#fff',
                customClass: {
                    popup: 'glass-dark'
                }
            });
        };

        // Gallery Modal
        window.showModal = (src) => {
            const modal = document.getElementById('img-modal');
            document.getElementById('modal-img').src = src;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        };
        window.closeModal = () => {
            const modal = document.getElementById('img-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        };

        // Countdown
        const targetDate = dayjs('2026-01-08T08:00:00');
        function updateCountdown() {
            const now = dayjs();
            const diff = targetDate.diff(now);
            
            if(diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            } else {
                document.querySelectorAll('#days, #hours, #minutes').forEach(el => {
                    el.textContent = '00';
                });
            }
        }
        
        updateCountdown();
        setInterval(updateCountdown, 60000);

        // RSVP Logic
        document.getElementById('rsvp-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('guest-name').value.trim();
            const msg = document.getElementById('guest-msg').value.trim();
            const status = document.getElementById('guest-status').value;
            const count = document.getElementById('guest-count').value;

            if(!name || !status || !count) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Perhatian',
                    text: 'Mohon lengkapi semua data yang diperlukan',
                    background: '#0A0A0A',
                    color: '#fff',
                    customClass: {
                        popup: 'glass-dark'
                    }
                });
                return;
            }

            push(ref(db, 'guestbook'), {
                name: name,
                message: msg || '-',
                status: status,
                count: count,
                timestamp: serverTimestamp()
            }).then(() => {
                Swal.fire({
                    icon: 'success',
                    title: 'Terima Kasih',
                    text: 'Konfirmasi kehadiran Anda telah tersimpan',
                    background: '#0A0A0A',
                    color: '#fff',
                    customClass: {
                        popup: 'glass-dark'
                    }
                });
                document.getElementById('rsvp-form').reset();
            }).catch(error => {
                console.error('Error:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Maaf',
                    text: 'Terjadi kesalahan, silakan coba lagi',
                    background: '#0A0A0A',
                    color: '#fff'
                });
            });
        });

        // Load Wishes
        const wishesRef = ref(db, 'guestbook');
        onValue(wishesRef, (snapshot) => {
            const box = document.getElementById('wishes-box');
            box.innerHTML = '';
            const data = snapshot.val();
            
            if(data) {
                const wishesArray = Object.entries(data).map(([key, value]) => ({ key, ...value }));
                wishesArray.sort((a, b) => b.timestamp - a.timestamp);

                wishesArray.forEach(item => {
                    const date = item.timestamp ? 
                        new Date(item.timestamp).toLocaleDateString('id-ID', {
                            day: 'numeric',
                            month: 'short',
                            year: 'numeric'
                        }) : 'Baru saja';
                    
                    box.innerHTML += `
                        <div class="glass-dark p-4 rounded-xl border-l-2 border-[#D4AF37]">
                            <div class="flex justify-between items-start mb-2">
                                <span class="font-semibold text-white text-sm font-body">${item.name}</span>
                                <span class="text-[10px] bg-[#D4AF37]/20 text-[#D4AF37] px-2 py-1 rounded-full font-body">
                                    ${item.status}
                                </span>
                            </div>
                            <p class="text-gray-300 text-xs mb-1 font-body">${item.message}</p>
                            <p class="text-gray-500 text-[10px] font-body">${date}</p>
                        </div>
                    `;
                });
            } else {
                box.innerHTML = `
                    <div class="text-center py-8 text-gray-500 font-body">
                        <i class="fas fa-comment-alt text-2xl mb-2"></i>
                        <p class="text-sm">Belum ada ucapan</p>
                    </div>
                `;
            }
        });

        // Add scroll effects
        window.addEventListener('scroll', () => {
            const elements = document.querySelectorAll('.shimmer');
            elements.forEach(el => {
                const rect = el.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    el.style.animationPlayState = 'running';
                }
            });
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
            if (e.key === 'm' || e.key === 'M') {
                toggleMusic();
            }
        });

        // Preload critical images
        window.addEventListener('load', () => {
            const images = [
                'https://picsum.photos/seed/bride-luxury/500/500.jpg',
                'https://picsum.photos/seed/groom-luxury/500/500.jpg',
                'https://picsum.photos/seed/bismillah-gold/200/80.jpg'
            ];
            
            images.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        });
    </script>
</body>
</html>
